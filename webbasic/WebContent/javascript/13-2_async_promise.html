<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>	
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">		
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>		
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>		
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
	</head>
	<body>
		<script>
			// Promise 생성하고 리턴하는 함수
			function work() {
			let promise = new Promise(function(resolve, reject) {
				// 실제 작업 내용을 정의한다.
				// ...
				
			    let result = true;
				if(result) resolve("success");
				else reject("fail");				
			});
			
			return promise;
			}
			
			// 버튼 클릭 이벤트 시 실행되는 함수
			async function func1() {
				console.log("이벤트 처리 시작");
				
				try {
					var result = await work();  // await 했으므로 work() 를 기다리게 된다. : 동기식
					console.log("result : " + result);					
				} catch(err) {
					console.log(err);
				}
				
				console.log(" 이벤트 처리 종료");
			}
			
			function func2() {
				// 비동기로 아래의 코드가 실행된다.
				console.log("이벤트 처리 시작 2");
				func1(); // 비동기 메소드: 내부에 await 이있지만 async 이므로 이는 비동기로 처리되지만, 이 내부는 동기식이다.
				console.log(" 이벤트 처리 종료 2");
			}
			
		</script>
		
		<div class="card">
			<div class="card-header">Promise</div>
			<div class="card-body">
				<button class="btn btn-info" onclick="func2()">promise 실행</button>		
			</div>
		</div>
	</body>
</html>